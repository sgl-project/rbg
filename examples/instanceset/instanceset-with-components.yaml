apiVersion: workloads.x-k8s.io/v1alpha1
kind: RoleBasedGroup
metadata:
  name: demo
spec:
  roles:
    - name: engine
      # Default pattern is Stateful (ordered). To use Stateless (unordered) pattern,
      # uncomment the following annotations section:
      # annotations:
      #   instance.rolebasedgroup.workloads.x-k8s.io/pattern: Stateless
      replicas: 3
      rolloutStrategy:
        type: RollingUpdate
        rollingUpdate:
          type: InPlaceIfPossible
      workload:
        apiVersion: workloads.x-k8s.io/v1alpha1
        kind: InstanceSet
      components:
        - name: component-1
          size: 1
          template:
            spec:
              containers:
                - name: main
                  image: nginx:latest
        - name: component-2
          size: 2
          template:
            spec:
              containers:
                - name: main
                  image: nginx:latest
        - name: component-3
          size: 3
          template:
            spec:
              containers:
                - name: main
                  image: nginx:latest